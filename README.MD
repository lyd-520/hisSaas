# 业务功能：医院his管理系统

# SAAS设计： 
原有的系统是针对一个医院内部的信息管理系统。SAAS化，软件即平台，希望在平台上，多个医院都可以正常使用。  
有一种简单的saas设计，是只分数据。在每个业务表上增加tenant_id租户ID字段，区分每个医院。
这些医院的数据时在一起的，大医院和小医院会有影响。  
这里采用了一种分库的实现方式，每个医院对应后端一套独立的mysql数据库，数据隔离。  

# 实现方式：
- 在项目中配置一个默认的master库，在这个库中可以维护医院的mysql信息，并动态创建mysql数据库。  
- 登录页增加医院选项。 管理中心对应master库。 其他医院对应自己的库。 医院的sql脚本中删除掉了医院的元数据信息表。
- 用户登录后的所有SQL操作，均通过登录时选择的医院，路由到医院对应的数据库，实现了基础的资源隔离。
- 所有医院信息，会在初始化时读取master中的所有信息。同时，初始化库时，也会更新缓存。
- 医院的mysql库目前只能新增。懒得做删除了。管理员页面操作小心点就算了。

# saas补充：
- 现在只能动态建mysql的库，但是不能动态搭建mysql服务，需要补充。
- 前端资源没有独立。也就是说所有医院都是访问同一套前端。不过前端可以通过nginx水平扩展。